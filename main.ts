namespace SpriteKind {
    export const coin = SpriteKind.create()
    export const secret = SpriteKind.create()
    export const secretvillan = SpriteKind.create()
    export const secretspecial = SpriteKind.create()
    export const Button = SpriteKind.create()
    export const score = SpriteKind.create()
}
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    if (level == 1) {
        if (person.isHittingTile(CollisionDirection.Bottom)) {
            spriteutils.jumpImpulse(person, jumpheight)
            music.play(music.createSoundEffect(WaveShape.Square, 400, 600, 255, 0, 100, SoundExpressionEffect.None, InterpolationCurve.Linear), music.PlaybackMode.UntilDone)
        }
    }
})
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    myDart = darts.create(assets.image`shoot`, SpriteKind.Projectile, person.x, person.y)
    myDart.setTrace()
    myDart.angle = 330
    myDart.pow = 110
    myDart.gravity = 30
    spriteutils.onSpriteUpdateInterval(myDart, 100, function (sprite) {
        myDart.angle += 2
    })
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.secretvillan, function (sprite, otherSprite) {
    person.startEffect(effects.disintegrate)
    scene.cameraShake(4, 500)
    statusbar.value += -3
})
scene.onOverlapTile(SpriteKind.Player, sprites.dungeon.hazardLava0, function (sprite, location) {
    person.startEffect(effects.fire, 500)
    scene.cameraShake(3, 200)
    statusbar.value += -1.2
})
function shopupgrades () {
    jumpboostshop = sprites.create(assets.image`jump boost`, SpriteKind.Button)
    jumpboostshop.setPosition(22, 46)
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.secretspecial, function (sprite, otherSprite) {
    sprites.destroy(otherSprite, effects.disintegrate, 200)
    scene.cameraShake(5, 200)
    tiles.setTileAt(value, sprites.dungeon.greenOuterNorth2)
    for (let value of tiles.getTilesByType(assets.tile`myTile2`)) {
        secretvillan2 = sprites.create(assets.image`door`, SpriteKind.secretvillan)
        tiles.placeOnTile(secretvillan2, value)
        animation.runImageAnimation(
        secretvillan2,
        [img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `],
        500,
        true
        )
        tiles.setTileAt(value, sprites.dungeon.greenOuterNorth2)
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile3`)) {
        tiles.setTileAt(value, sprites.dungeon.greenOuterNorth2)
    }
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    if (level == 1) {
        animation.runImageAnimation(
        person,
        [img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `],
        150,
        true
        )
        scroller.scrollBackgroundWithSpeed(8, 0, scroller.BackgroundLayer.Layer0)
    }
})
controller.right.onEvent(ControllerButtonEvent.Released, function () {
    if (level == 1) {
        animation.runImageAnimation(
        person,
        [img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `],
        150,
        false
        )
        scroller.scrollBackgroundWithSpeed(0, 0, scroller.BackgroundLayer.Layer0)
    }
})
controller.left.onEvent(ControllerButtonEvent.Released, function () {
    if (level == 1) {
        animation.runImageAnimation(
        person,
        [img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `],
        150,
        false
        )
        scroller.scrollBackgroundWithSpeed(0, 0, scroller.BackgroundLayer.Layer0)
    }
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`tile1`, function (sprite, location) {
    person.startEffect(effects.ashes, 500)
    scene.cameraShake(3, 200)
    statusbar.value += -1
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    if (level == 1) {
        animation.runImageAnimation(
        person,
        [img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `],
        150,
        true
        )
        scroller.scrollBackgroundWithSpeed(-8, 0, scroller.BackgroundLayer.Layer0)
    }
})
scene.onOverlapTile(SpriteKind.Player, sprites.dungeon.hazardLava1, function (sprite, location) {
    person.startEffect(effects.fire, 500)
    scene.cameraShake(3, 200)
    statusbar.value += -1.2
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.coin, function (sprite, otherSprite) {
    sprites.destroy(otherSprite, effects.trail, 100)
    music.play(music.melodyPlayable(music.baDing), music.PlaybackMode.InBackground)
    score += 1
})
controller.B.onEvent(ControllerButtonEvent.Released, function () {
    myDart.throwDart()
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Button, function (sprite, otherSprite) {
    if (otherSprite == PLay && controller.A.isPressed()) {
        level = 1
        level_contol()
    }
})
function level_contol () {
    if (level == 0) {
        scene.setBackgroundImage(assets.image`main menu`)
        PLay = sprites.create(assets.image`playbutton`, SpriteKind.Button)
        Shop = sprites.create(assets.image`Shop`, SpriteKind.Button)
        Cursor = sprites.create(assets.image`cursor`, SpriteKind.Player)
        PLay.setPosition(75, 95)
        Shop.setPosition(125, 95)
        controller.moveSprite(Cursor)
        Cursor.startEffect(effects.trail)
    }
    if (level == 1) {
        sprites.destroyAllSpritesOfKind(SpriteKind.Player)
        sprites.destroyAllSpritesOfKind(SpriteKind.Button)
    }
}
function secret_part () {
    scene.setBackgroundImage(img`
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        `)
    tiles.setCurrentTilemap(tilemap`secret exit`)
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.secret, function (sprite, otherSprite) {
    sprites.destroy(otherSprite, effects.disintegrate, 100)
    tiles.setTileAt(value, sprites.dungeon.greenOuterNorth2)
    secret_part()
})
controller.combos.attachCombo("aa", function () {
	
})
scene.onOverlapTile(SpriteKind.Player, sprites.dungeon.collectibleInsignia, function (sprite, location) {
    music.stopAllSounds()
    animation.stopAnimation(animation.AnimationTypes.All, person)
    person.startEffect(effects.confetti, 2000)
    music.play(music.melodyPlayable(music.beamUp), music.PlaybackMode.InBackground)
    pause(1000)
})
let Cursor: Sprite = null
let Shop: Sprite = null
let PLay: Sprite = null
let secretvillan2: Sprite = null
let value: tiles.Location = null
let jumpboostshop: Sprite = null
let statusbar: StatusBarSprite = null
let myDart: Dart = null
let person: Sprite = null
let level = 0
let jumpheight = 0
jumpheight = 27
level = 0
let score = 0
level_contol()
